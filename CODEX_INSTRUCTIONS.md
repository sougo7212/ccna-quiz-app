# Codex作業指示書

## 概要
CCNA問題集アプリの問題データ（quiz_data.js）を完成させる作業です。
画像から問題を読み取り、JSONデータとして構造化してください。

## 作業ブランチ
- ブランチ名: `codex-processing`
- このブランチで作業し、完成したらプルリクエストを作成してください

## 現在の状況
- **完成済み**: 問題1〜76（約28%）
- **残り作業**: 問題77〜267（約191問）
- **問題画像**: 124枚（0001.jpg〜0124.jpg）に267問が含まれている
- **解答画像**: 221枚（page_0001.png〜page_0221.png）

## タスク詳細

### 1. 問題CBZの処理（メインタスク）

#### 入力データ
- 場所: `問題画像/0001.jpg` 〜 `問題画像/0124.jpg`
- 形式: 日本語のCCNA試験問題が1ページに1〜2問記載されている

#### 処理方法
1. 画像を順番に読み取る（Vision APIまたは画像読み取り機能を使用）
2. 各画像から以下の情報を抽出:
   - カテゴリ（ページ上部のヘッダー）
   - 問題番号（例: "問題 13"）
   - 問題文
   - 選択肢（A, B, C, D, E など）
   - 正解（ページ下部に記載されている組み合わせ）
   - 正解数（"正解を X つ選択" から判定）

#### 出力形式
`quiz_data.js` に以下の形式でデータを追加:

```javascript
const QUIZ_DATA = [
    {
        "id": 1,
        "category": "TCP/IP インターネット レイヤ、IPv4アドレシング、およびサブネットの概要",
        "question": "問題文がここに入ります。",
        "choices": [
            "選択肢A",
            "選択肢B",
            "選択肢C",
            "選択肢D"
        ],
        "correct_answers": [0, 2], // 0-indexedの配列（A=0, B=1, C=2...）
        "answer_count": 2, // 正解として選ぶべき数
        "images": {
            "question": "問題画像/0001.jpg",
            "answer": "解答画像/page_0001.png"
        },
        "explanation": "解説文（解答画像から読み取る）"
    },
    // ... 続く
];
```

#### 重要な注意点
- 1つの画像ファイルに複数の問題が含まれることがある
- 問題番号は連番だが、画像ファイル名と一致しない
- 現在76問まで完成しているので、**問題77から開始**してください
- 問題77は `問題画像/0046.jpg` あたりから始まると思われます（要確認）

### 2. 解答CBZの処理（サブタスク）

#### 入力データ
- 場所: `解答画像/page_0001.png` 〜 `解答画像/page_0221.png`
- 形式: 各問題の詳しい解説が記載されている

#### 処理方法
1. 各問題に対応する解答画像を特定する
   - 解答画像のページ番号と問題番号を照合
   - 画像内の「問題 XX」という記載を手がかりにする
2. 解答画像から以下を抽出:
   - 正解の選択肢
   - 解説文（explanation フィールドに記載）

#### 解答画像と問題のマッピング
- 問題1の解答 → page_0001.png
- 問題2の解答 → page_0002.png（または複数問題が1ページに）
- **必ず画像を確認して正しいマッピングを行う**

### 3. 作業の進め方

#### ステップ1: 問題画像の処理
1. `問題画像/0046.jpg`（または問題77が含まれる画像）から開始
2. 問題文、選択肢、正解を抽出
3. quiz_data.jsに追加していく
4. 定期的にコミット（10〜20問ごと推奨）

#### ステップ2: 解答画像との照合
1. 各問題について、対応する解答画像を探す
2. images.answer フィールドを正しく設定
3. explanation フィールドに解説を追加

#### ステップ3: 検証
1. 全267問が揃っているか確認
2. JSONの構文エラーがないか確認
3. 各問題のフィールドが正しく埋まっているか確認

### 4. コミット方法

```bash
# 作業ブランチに切り替え
git checkout codex-processing

# 変更を確認
git status

# 問題を追加したらコミット
git add quiz_data.js
git commit -m "Add questions 77-100"

# GitHubにプッシュ
git push origin codex-processing
```

### 5. 完了条件

以下がすべて満たされたら完了:
- [ ] 問題77〜267がquiz_data.jsに追加されている
- [ ] 各問題に正しい解答画像がマッピングされている
- [ ] 解説文が記載されている
- [ ] JSONの構文エラーがない
- [ ] アプリで正常に動作する（テスト推奨）

## 既存データの参照

問題1〜76のデータは既に完成しているので、フォーマットの参考にしてください。
`quiz_data.js` の冒頭を確認すれば、正しい構造が分かります。

## 質問・不明点

何か不明な点があれば、このファイルに質問を追記してコミットしてください。
または、GitHub Issuesに投稿してください。

## 進捗報告

定期的に進捗をコミットメッセージで報告してください:
- "Add questions 77-100 (24 questions)"
- "Add questions 101-150 (50 questions)"
- など

## その他の注意事項

1. **正解の抽出**: 画像下部の組み合わせ表から正解を特定してください
   - 例: "(1) A① B⑤ C③ D④ E②" → 選択肢の組み合わせ(1)が正解
2. **複数正解**: 「正解を 2 つ選択」のような問題は、correct_answersに複数の値を含めます
3. **図表問題**: 問題文に図表が含まれる場合も、テキストとして抽出してください
4. **文字化け**: 日本語の抽出に問題がある場合は、OCR精度を上げるか手動で修正してください

## 作業開始前の確認

```bash
# 現在のブランチを確認
git branch

# codex-processingブランチであることを確認
# もし違う場合は:
git checkout codex-processing

# 最新の状態を取得
git pull origin codex-processing

# 現在何問あるか確認
grep -o '"id":' quiz_data.js | wc -l
```

---

**Good luck! 🚀**
